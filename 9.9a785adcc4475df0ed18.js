(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{xZLo:function(t,e,n){"use strict";n.r(e),n.d(e,"PostsModule",function(){return Q});var i=n("AcyG"),o=n("3Pt+"),s=n("PCNd"),c=n("tyNb"),r=n("n90j"),a=n("quSY"),u=n("zONo"),b=n("Jsfd"),l=n("XKO9"),p=n("B0Pf"),h=function(){function t(t,e){this.language=t,this.sortBy=e}return t.type="[Posts] Get",t}(),f=function(){function t(t){this.pageIndex=t}return t.type="[Posts] Change Page Index",t}(),d=function(){function t(t){this.pageSize=t}return t.type="[Posts] Change Page Size",t}(),g=function(t){return t.posts},m=function(t){return g(t).posts},z=Object(i.k)([m],function(t){return t.length}),y=function(t){return g(t).pageSize},k=Object(i.k)([m,function(t){return g(t).pageIndex},y],function(t,e,n){return t.slice((e-1)*n,e*n)}),P=n("fXoL"),S=n("YaLo"),E=n("ofXK"),v=n("Ff2k"),C=n("3/1E"),w=n("zAKX"),O=n("OzZK"),V=n("C2AL"),I=n("FwiY"),B=n("Mean"),L=n("RwU8"),j=n("sYmb");function x(t,e){if(1&t&&(P.Wb(0,"form",6),P.Wb(1,"nz-select",7),P.Rb(2,"nz-option",8),P.hc(3,"translate"),P.Rb(4,"nz-option",8),P.hc(5,"translate"),P.Rb(6,"nz-option",8),P.hc(7,"translate"),P.Rb(8,"nz-option",8),P.hc(9,"translate"),P.Rb(10,"nz-option",8),P.hc(11,"translate"),P.Vb(),P.Vb()),2&t){var n=P.gc();P.mc("formGroup",n.searchForm),P.Eb(2),P.mc("nzValue",n.SortBy.NewestPosts)("nzLabel",P.ic(3,11,n.SortBy.NewestPosts)),P.Eb(2),P.mc("nzValue",n.SortBy.OldestPosts)("nzLabel",P.ic(5,13,n.SortBy.OldestPosts)),P.Eb(2),P.mc("nzValue",n.SortBy.MostLikes)("nzLabel",P.ic(7,15,n.SortBy.MostLikes)),P.Eb(2),P.mc("nzValue",n.SortBy.MostDislikes)("nzLabel",P.ic(9,17,n.SortBy.MostDislikes)),P.Eb(2),P.mc("nzValue",n.SortBy.MostComments)("nzLabel",P.ic(11,19,n.SortBy.MostComments))}}var W=function(t){return["/post",t]};function F(t,e){if(1&t){var n=P.Xb();P.Wb(0,"nz-list-item",9),P.Wb(1,"nz-list-item-meta"),P.Wb(2,"nz-list-item-meta-title"),P.Wb(3,"a",10),P.Ec(4),P.Vb(),P.Vb(),P.Wb(5,"nz-list-item-meta-description"),P.Ec(6),P.hc(7,"date"),P.Vb(),P.Vb(),P.Wb(8,"a",10),P.Ec(9),P.Vb(),P.Wb(10,"ul",11),P.Wb(11,"nz-list-item-action"),P.Wb(12,"button",12),P.dc("click",function(){P.uc(n);var t=e.$implicit;return P.gc().like(t)}),P.Rb(13,"i",13),P.hc(14,"async"),P.Ec(15),P.Vb(),P.Vb(),P.Wb(16,"nz-list-item-action"),P.Wb(17,"button",12),P.dc("click",function(){P.uc(n);var t=e.$implicit;return P.gc().dislike(t)}),P.Rb(18,"i",14),P.hc(19,"async"),P.Ec(20),P.Vb(),P.Vb(),P.Wb(21,"nz-list-item-action"),P.Wb(22,"a",10),P.Rb(23,"i",15),P.Ec(24),P.Vb(),P.Vb(),P.Vb(),P.Vb()}if(2&t){var i=e.$implicit,o=P.gc();P.mc("nzNoFlex",!0),P.Eb(3),P.mc("routerLink",P.pc(19,W,i.id)),P.Eb(1),P.Fc(i.title),P.Eb(2),P.Gc(" ",P.jc(7,12,i.createdAt,"medium")," "),P.Eb(2),P.mc("routerLink",P.pc(21,W,i.id)),P.Eb(1),P.Fc(i.message),P.Eb(4),P.mc("nzTheme",P.ic(14,15,o.doesUserLikesComment$(i.id))?"fill":"outline"),P.Eb(2),P.Gc(" ",i.likesCount," "),P.Eb(3),P.mc("nzTheme",P.ic(19,17,o.doesUserDislikesComment$(i.id))?"fill":"outline"),P.Eb(2),P.Gc(" ",i.dislikesCount," "),P.Eb(2),P.mc("routerLink",P.pc(23,W,i.id)),P.Eb(2),P.Gc(" ",i.commentsCount," ")}}function $(t,e){if(1&t){var n=P.Xb();P.Wb(0,"nz-result",16),P.hc(1,"translate"),P.Wb(2,"div",17),P.Wb(3,"button",18),P.dc("click",function(){return P.uc(n),P.gc().getPosts()}),P.Ec(4),P.hc(5,"translate"),P.Vb(),P.Vb(),P.Vb()}2&t&&(P.mc("nzTitle",P.ic(1,2,"MESSAGES.FAILED")),P.Eb(4),P.Gc(" ",P.ic(5,4,"RETRY")," "))}var N=[{path:"",component:function(){function t(t,e,n){this.store=t,this.actions=e,this.likeDislikeService=n,this.posts=[],this.searchForm=new o.g({sortBy:new o.d(u.a.NewestPosts)}),this.SortBy=u.a,this.loading=!0,this.hasError=!1,this.subscription=new a.a}return t.prototype.ngOnInit=function(){var t=this;this.getPosts(),this.subscription.add(this.actions.pipe(Object(i.o)(b.a)).subscribe(function(){t.getPosts()})),this.subscription.add(this.searchForm.get("sortBy").valueChanges.subscribe(function(){t.getPosts()})),this.subscription.add(this.store.select(k).subscribe(function(e){t.posts=Object(r.a)(e)})),this.totalPostNumber$=this.store.select(z),this.pageSize$=this.store.select(y),this.pageIndex$=this.store.select(y)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.getPosts=function(){var t=this;this.store.dispatch(new h(this.store.selectSnapshot(l.a),this.searchForm.value.sortBy)).subscribe(function(){t.loading=!1,t.hasError=!1},function(){t.loading=!1,t.hasError=!0})},t.prototype.onPageIndexChange=function(t){this.store.dispatch(new f(t))},t.prototype.onPageSizeChange=function(t){this.store.dispatch(new d(t))},t.prototype.doesUserLikesComment$=function(t){return this.store.select(Object(p.b)(t))},t.prototype.doesUserDislikesComment$=function(t){return this.store.select(Object(p.a)(t))},t.prototype.like=function(t){this.likeDislikeService.like(this.doesUserLikesComment$(t.id),this.doesUserDislikesComment$(t.id),t)},t.prototype.dislike=function(t){this.likeDislikeService.dislike(this.doesUserLikesComment$(t.id),this.doesUserDislikesComment$(t.id),t)},t.\u0275fac=function(e){return new(e||t)(P.Qb(i.h),P.Qb(i.b),P.Qb(S.a))},t.\u0275cmp=P.Kb({type:t,selectors:[["app-posts-home"]],decls:9,vars:14,consts:[["class","mb3",3,"formGroup",4,"ngIf"],["nzItemLayout","vertical",1,"bg-white",3,"nzLoading","nzBordered"],[3,"nzNoFlex",4,"ngFor","ngForOf"],[1,"tc","mt3"],["nzShowSizeChanger","",3,"nzPageIndex","nzPageSize","nzTotal","nzPageSizeChang","nzPageIndexChange"],["nzStatus","warning",3,"nzTitle",4,"ngIf"],[1,"mb3",3,"formGroup"],["formControlName","sortBy"],[3,"nzValue","nzLabel"],[3,"nzNoFlex"],[3,"routerLink"],["nz-list-item-actions",""],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","like",3,"nzTheme"],["nz-icon","","nzType","dislike",3,"nzTheme"],["nz-icon","","nzType","comment"],["nzStatus","warning",3,"nzTitle"],["nz-result-extra",""],["nz-button","","nzType","primary",3,"click"]],template:function(t,e){1&t&&(P.Cc(0,x,12,21,"form",0),P.Wb(1,"nz-list",1),P.Cc(2,F,25,25,"nz-list-item",2),P.Vb(),P.Wb(3,"div",3),P.Wb(4,"nz-pagination",4),P.dc("nzPageSizeChang",function(t){return e.onPageSizeChange(t)})("nzPageIndexChange",function(t){return e.onPageIndexChange(t)}),P.hc(5,"async"),P.hc(6,"async"),P.hc(7,"async"),P.Vb(),P.Vb(),P.Cc(8,$,6,6,"nz-result",5)),2&t&&(P.mc("ngIf",!e.loading&&!e.hasError),P.Eb(1),P.mc("nzLoading",e.loading)("nzBordered",!0),P.Eb(1),P.mc("ngForOf",e.posts),P.Eb(2),P.mc("nzPageIndex",P.ic(5,8,e.pageIndex$))("nzPageSize",P.ic(6,10,e.pageSize$))("nzTotal",P.ic(7,12,e.totalPostNumber$)),P.Eb(4),P.mc("ngIf",!e.loading&&e.hasError))},directives:[E.m,v.a,E.l,C.a,o.s,o.o,o.h,w.b,o.n,o.f,w.a,v.d,v.e,v.g,c.g,v.f,v.c,v.b,O.a,V.a,I.a,B.a,B.b,L.a],pipes:[E.b,j.c,E.e],styles:[""]}),t}(),data:{reuse:!0}}],T=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=P.Ob({type:t}),t.\u0275inj=P.Nb({imports:[[c.h.forChild(N)],c.h]}),t}(),D=n("lJxs"),G=n("bO7i"),M=n("I/3d"),R=function(){function t(t){this.firestore=t}return t.prototype.getPosts=function(t,e,n){void 0===t&&(t="en"),void 0===n&&(n=null);var i=u.b[e],o=i.orderByField,s=i.orderByDirection;return this.firestore.collection("posts",function(e){var i=e.where("language","==",t).orderBy(o,s);return n&&(i=e.startAfter(n)),i}).get().pipe(Object(D.a)(function(t){return t.docs.map(function(t){var e=Object(G.a)(t.data());return e.id=t.id,e})}))},t.\u0275fac=function(e){return new(e||t)(P.ac(M.a))},t.\u0275prov=P.Mb({token:t,factory:t.\u0275fac}),t}(),U=n("mrSG"),A=n("vkgz"),X=n("JIr8"),J=n("EBwW"),K={posts:null,pageIndex:1,pageSize:10},Y=function(){function t(t){this.postsSerivce=t}return t.prototype.getPosts=function(t,e){return t.patchState({posts:null}),this.postsSerivce.getPosts(e.language,e.sortBy).pipe(Object(A.a)(function(e){if(!e||!e.length)throw e;t.patchState({posts:e})}),Object(X.a)(function(e){throw t.dispatch(new J.a),e}))},t.prototype.changePostsPageIndex=function(t,e){t.patchState({pageIndex:e.pageIndex})},t.prototype.changePostsPageNumber=function(t,e){t.patchState({pageSize:e.pageSize})},t.\u0275fac=function(e){return new(e||t)(P.ac(R))},t.\u0275prov=P.Mb({token:t,factory:t.\u0275fac}),Object(U.c)([Object(i.a)(h)],t.prototype,"getPosts",null),Object(U.c)([Object(i.a)(f)],t.prototype,"changePostsPageIndex",null),Object(U.c)([Object(i.a)(d)],t.prototype,"changePostsPageNumber",null),t=Object(U.c)([Object(i.f)({name:"posts",defaults:Object(U.a)({},K)})],t)}(),Q=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=P.Ob({type:t}),t.\u0275inj=P.Nb({providers:[R],imports:[[s.a,T,i.e.forFeature([Y]),o.i,o.q]]}),t}()}}]);